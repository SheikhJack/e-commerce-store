name: Ecommerce Store Tests

on:
    push:
     branches:
        - main

jobs:
    test:
        runs-on: ubuntu-latest
        defaults:
            run:
                 working-directory: ./app/
         
        strategy:
            matrix:
                nextjs-version: [14]
                
        env:
          MODE: "dev"

        steps:
          - uses: actions/checkout@v3
          
          - name: Set up Node.js
            uses: actions/setup-node@v3
            with:
              node-version: "20"
          
          - name: Install dependencies
            run: npm install    

          - name: Test with Next.js version ${{ matrix.nextjs-version }}
            run: npm install next@${{ matrix.nextjs-version }} && npm test
          
          